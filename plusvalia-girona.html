<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Plusval√≠a - Girona</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background: white;
            min-height: 100vh;
            padding: 0;
            margin: 0;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 0;
            box-shadow: none;
            overflow: hidden;
            min-height: 100vh;
        }

        .header {
            background: white;
            color: #333;
            padding: 40px 30px;
            text-align: center;
            border-bottom: 1px solid #e0e0e0;
        }

        .header h1 {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 10px;
            line-height: 1.2;
        }

        .header p {
            font-size: 18px;
            opacity: 0.95;
        }

        .content {
            padding: 30px;
        }

        .form-group {
            margin-bottom: 30px;
        }

        label {
            display: block;
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 12px;
        }

        .slider-container {
            position: relative;
        }

        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #e0e0e0;
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }

        input[type="range"]::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }

        .value-display {
            text-align: center;
            font-size: 22px;
            font-weight: 700;
            color: #667eea;
            margin-top: 10px;
            min-height: 30px;
        }

        .radio-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 10px;
        }

        .radio-option {
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 16px;
            font-weight: 600;
        }

        .radio-option:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .radio-option.selected {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }

        .btn-calcular {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 20px;
        }

        .btn-calcular:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        .btn-calcular:active {
            transform: translateY(0);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            padding: 20px;
            overflow-y: auto;
        }

        .modal.modal-visible {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 40px 30px;
            max-width: 500px;
            width: 100%;
            position: relative;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .close-x {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 32px;
            color: #999;
            cursor: pointer;
            line-height: 1;
        }

        .close-x:hover {
            color: #333;
        }

        #contenidoResultado {
            font-size: 16px;
            line-height: 1.8;
            color: #333;
            margin-bottom: 20px;
        }

        #contenidoResultado strong {
            color: #667eea;
        }

        .resultado-imagen {
            width: 120px;
            height: 120px;
            object-fit: cover;
            border-radius: 50%;
            margin: 25px auto;
            display: block;
            border: 4px solid #667eea;
        }

        .descripcion-final {
            text-align: center;
            font-size: 16px;
            margin: 20px 0;
            color: #666;
        }

        #whatsappBtn {
            display: block;
            width: 100%;
            padding: 16px;
            background: #25D366;
            color: white;
            text-align: center;
            text-decoration: none;
            border-radius: 12px;
            font-weight: 700;
            font-size: 16px;
            transition: all 0.3s;
        }

        #whatsappBtn:hover {
            background: #20BA5A;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(37, 211, 102, 0.4);
        }

        .disclaimer {
            margin-top: 15px;
            font-size: 14px;
            color: #e74c3c;
            text-align: center;
            font-weight: 600;
        }

        @media (max-width: 600px) {
            .header h1 {
                font-size: 26px;
            }

            .header p {
                font-size: 16px;
            }

            .content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div style="text-align: center; margin-bottom: 20px;">
                <h1 style="font-size: 20px; font-weight: 600; margin: 0 0 15px 0; color: #333;">Calculadora de<br>plusval√≠a municipal</h1>
                <div style="display: flex; align-items: center; justify-content: center; gap: 8px; margin-top: 10px;">
                    <img src="https://github.com/botonescurso/calculadoras/raw/main/ajuntament-girona.png" alt="Ajuntament de Girona" style="height: 60px; width: auto;" onerror="this.onerror=null; this.src='https://github.com/botonescurso/calculadoras/raw/main/Fabian.jpg';">
                    <span style="font-size: 14px; color: #666;">de Girona</span>
                </div>
            </div>
        </div>

        <div class="content">
            <div class="form-group">
                <label>üìÖ Fecha de adquisici√≥n</label>
                <input type="date" id="fechaAdquisicion" style="width: 100%; padding: 15px; border: 2px solid #e0e0e0; border-radius: 12px; font-size: 16px;">
            </div>

            <div class="form-group">
                <label>üìÖ Fecha de transmisi√≥n (venta)</label>
                <input type="date" id="fechaTransmision" style="width: 100%; padding: 15px; border: 2px solid #e0e0e0; border-radius: 12px; font-size: 16px;">
            </div>

            <div class="form-group">
                <label>üí∞ Valor de adquisici√≥n (‚Ç¨)</label>
                <div class="slider-container">
                    <input type="range" id="valorAdquisicion" min="50000" max="1000000" step="5000" value="150000">
                    <div class="value-display" id="valorAdquisicionDisplay">150.000 ‚Ç¨</div>
                </div>
            </div>

            <div class="form-group">
                <label>üí∏ Valor de transmisi√≥n (‚Ç¨)</label>
                <div class="slider-container">
                    <input type="range" id="valorTransmision" min="50000" max="1000000" step="5000" value="250000">
                    <div class="value-display" id="valorTransmisionDisplay">250.000 ‚Ç¨</div>
                </div>
            </div>

            <div class="form-group">
                <label>üåç Valor catastral del suelo (‚Ç¨)</label>
                <p style="font-size: 13px; color: #666; margin-top: 5px; margin-bottom: 12px; line-height: 1.4;">
                    üìã <strong>D√≥nde encontrarlo:</strong> En tu recibo del IBI (Impuesto de Bienes Inmuebles), apartado "Valor Catastral del Suelo" o "Valor del Suelo"
                </p>
                <div class="slider-container">
                    <input type="range" id="valorSuelo" min="10000" max="500000" step="5000" value="70000">
                    <div class="value-display" id="valorSueloDisplay">70.000 ‚Ç¨</div>
                </div>
            </div>

            <div class="form-group">
                <label>üè¢ Valor catastral total (‚Ç¨)</label>
                <p style="font-size: 13px; color: #666; margin-top: 5px; margin-bottom: 12px; line-height: 1.4;">
                    üìã <strong>D√≥nde encontrarlo:</strong> En tu recibo del IBI, apartado "Valor Catastral" o "Base Imponible". Es la suma del valor del suelo + construcci√≥n.
                </p>
                <div class="slider-container">
                    <input type="range" id="valorTotal" min="50000" max="1000000" step="5000" value="150000">
                    <div class="value-display" id="valorTotalDisplay">150.000 ‚Ç¨</div>
                </div>
            </div>

            <button class="btn-calcular" onclick="calcularPlusvalia()">Calcular Plusval√≠a</button>
        </div>
    </div>

    <div class="modal" id="modalResultado">
        <div class="modal-content">
            <span class="close-x" onclick="cerrarModal()">√ó</span>
            <div id="contenidoResultado"></div>
            <img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAASABIAAD/4QBqRXhpZgAATU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAABJKGAAcAAAASAAAAUKABAAMAAAABAAEAAKACAAQAAAABAAABo6ADAAQAAAABAAABdAAAAABBU0NJSQAAAFNjcmVlbnNob3T/4Qm0aHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA2LjAuMCI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIiBleGlmOlBpeGVsWURpbWVuc2lvbj0iMzcyIiBleGlmOlVzZXJDb21tZW50PSJTY3JlZW5zaG90IiBleGlmOlBpeGVsWERpbWVuc2lvbj0iNDE5IiBleGlmOkNvbG9yU3BhY2U9IjEiLz4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8P3hwYWNrZXQgZW5kPSJ3Ij8+AP/AABEIAXQBowMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYT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" alt="Fabi√°n Caama√±o" class="resultado-imagen">
            <p class="descripcion-final">¬øQuieres que te presente yo la plusval√≠a ante el Ayuntamiento y pagues lo m√≠nimo posible?</p>
            <a id="whatsappBtn" href="#" target="_blank">üí¨ Consultar por WhatsApp</a>
            <p class="disclaimer">‚ö†Ô∏è C√°lculo estimado. Consulta con un profesional.</p>
        </div>
    </div>

    <script>
        // Sliders functionality
        const valorAdquisicionSlider = document.getElementById('valorAdquisicion');
        const valorAdquisicionDisplay = document.getElementById('valorAdquisicionDisplay');
        
        const valorTransmisionSlider = document.getElementById('valorTransmision');
        const valorTransmisionDisplay = document.getElementById('valorTransmisionDisplay');
        
        const valorSueloSlider = document.getElementById('valorSuelo');
        const valorSueloDisplay = document.getElementById('valorSueloDisplay');

        const valorTotalSlider = document.getElementById('valorTotal');
        const valorTotalDisplay = document.getElementById('valorTotalDisplay');

        valorAdquisicionSlider.addEventListener('input', function() {
            valorAdquisicionDisplay.textContent = Number(this.value).toLocaleString('es-ES') + ' ‚Ç¨';
        });

        valorTransmisionSlider.addEventListener('input', function() {
            valorTransmisionDisplay.textContent = Number(this.value).toLocaleString('es-ES') + ' ‚Ç¨';
        });

        valorSueloSlider.addEventListener('input', function() {
            valorSueloDisplay.textContent = Number(this.value).toLocaleString('es-ES') + ' ‚Ç¨';
        });

        valorTotalSlider.addEventListener('input', function() {
            valorTotalDisplay.textContent = Number(this.value).toLocaleString('es-ES') + ' ‚Ç¨';
        });

        function calcularPlusvalia() {
            const fechaAdq = new Date(document.getElementById('fechaAdquisicion').value);
            const fechaTrans = new Date(document.getElementById('fechaTransmision').value);
            const valorAdq = parseFloat(valorAdquisicionSlider.value);
            const valorTrans = parseFloat(valorTransmisionSlider.value);
            const valorSuelo = parseFloat(valorSueloSlider.value);
            const valorTotal = parseFloat(valorTotalSlider.value);

            if (!document.getElementById('fechaAdquisicion').value || !document.getElementById('fechaTransmision').value) {
                alert('Por favor, completa las fechas');
                return;
            }

            if (fechaAdq >= fechaTrans) {
                alert('La fecha de transmisi√≥n debe ser posterior a la de adquisici√≥n');
                return;
            }

            if (valorSuelo > valorTotal) {
                alert('El valor del suelo no puede ser mayor que el valor total');
                return;
            }

            // C√°lculo de a√±os
            const diffTime = Math.abs(fechaTrans - fechaAdq);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            const anios = Math.floor(diffDays / 365.25);
            let periodo = anios;
            if (anios < 1) periodo = "<1";
            if (anios > 20) periodo = 20;

            // Coeficientes seg√∫n a√±os de tenencia (Girona)
            const coeficientes = {
                "<1": 0.15, 1: 0.15, 2: 0.14, 3: 0.14, 4: 0.16, 5: 0.18,
                6: 0.19, 7: 0.20, 8: 0.19, 9: 0.15, 10: 0.12,
                11: 0.10, 12: 0.09, 13: 0.09, 14: 0.09, 15: 0.09,
                16: 0.10, 17: 0.13, 18: 0.17, 19: 0.23, 20: 0.40
            };

            const coef = coeficientes[periodo] || 0;
            
            // M√âTODO OBJETIVO (catastral)
            const baseObjetiva = valorSuelo * coef;
            
            // M√âTODO REAL (ganancia real)
            const gananciaBruta = valorTrans - valorAdq;
            const proporcionSuelo = valorSuelo / valorTotal;
            const baseReal = gananciaBruta * proporcionSuelo;

            // Se aplica el menor de los dos
            const baseFinal = Math.min(baseObjetiva, baseReal);
            const tipoImpositivo = 0.29; // 29% para Girona
            const cuotaFinal = baseFinal * tipoImpositivo;

            let resultado = '';

            if (gananciaBruta <= 0) {
                resultado = `
                    <h2 style="color: #667eea; margin-bottom: 20px;">üìä Resultado del C√°lculo</h2>
                    <p style="font-size: 18px; color: #e74c3c;"><strong>No hay incremento de valor (ganancia ‚â§ 0)</strong></p>
                    <p><strong>No hay sujeci√≥n al impuesto de plusval√≠a.</strong></p>
                `;
            } else {
                resultado = `
                    <h2 style="color: #667eea; margin-bottom: 20px;">üìä Resultado del C√°lculo</h2>
                    <p><strong>A√±os de tenencia:</strong> ${anios} a√±os</p>
                    <p><strong>Coeficiente aplicado:</strong> ${coef.toFixed(3)}</p>
                    
                    <div style="background: #f8f9ff; padding: 15px; border-radius: 10px; margin: 20px 0;">
                        <h3 style="color: #667eea; margin-top: 0;">üìã M√©todo Objetivo (Catastral)</h3>
                        <p><strong>Base Objetiva:</strong> ${baseObjetiva.toFixed(0).toLocaleString('es-ES')} ‚Ç¨</p>
                    </div>

                    <div style="background: #f8f9ff; padding: 15px; border-radius: 10px; margin: 20px 0;">
                        <h3 style="color: #667eea; margin-top: 0;">üí∞ M√©todo Real (Ganancia)</h3>
                        <p><strong>Ganancia bruta:</strong> ${gananciaBruta.toFixed(0).toLocaleString('es-ES')} ‚Ç¨</p>
                        <p><strong>Proporci√≥n del suelo:</strong> ${(proporcionSuelo * 100).toFixed(2)}%</p>
                        <p><strong>Base Real:</strong> ${baseReal.toFixed(0).toLocaleString('es-ES')} ‚Ç¨</p>
                    </div>

                    <div style="background: #e8f5e9; padding: 15px; border-radius: 10px; margin: 20px 0;">
                        <p><strong>Base Imponible final (la menor):</strong> ${baseFinal.toFixed(0).toLocaleString('es-ES')} ‚Ç¨</p>
                        <p><strong>Tipo impositivo:</strong> 29%</p>
                    </div>

                    <p style="font-size: 22px; margin-top: 20px;"><strong>Cuota a pagar estimada:</strong> <span style="color: #667eea; font-size: 28px;">${cuotaFinal.toFixed(0).toLocaleString('es-ES')} ‚Ç¨</span></p>
                `;
            }

            document.getElementById('contenidoResultado').innerHTML = resultado;
            
            const mensajeWhatsApp = encodeURIComponent(`Hola Fabi√°n, acabo de calcular mi plusval√≠a municipal. Base objetiva: ${baseObjetiva.toFixed(0)}‚Ç¨, Base real: ${baseReal.toFixed(0)}‚Ç¨. Cuota final: ${cuotaFinal.toFixed(0)}‚Ç¨. ¬øPuedes ayudarme?`);
            document.getElementById('whatsappBtn').href = `https://wa.me/34633105305?text=${mensajeWhatsApp}`;
            
            document.getElementById('modalResultado').classList.add('modal-visible');
            document.body.style.overflow = 'hidden';
        }

        function cerrarModal() {
            document.getElementById('modalResultado').classList.remove('modal-visible');
            document.body.style.overflow = '';
        }
    </script>
</body>
</html>